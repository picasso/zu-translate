!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function t(t){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?e(Object(l),!0).forEach((function(e){n(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return r(e)||i(e,t)||c(e,t)||d()}function l(e){return o(e)||s(e)||c(e)||p()}function o(e){if(Array.isArray(e))return u(e)}function r(e){if(Array.isArray(e))return e}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a=[],l=!0,o=!1,r,s;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){o=!0,s=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw s}}return a}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){var t=Y("Content attributes:","zu-translate");return se("".concat(t,"`").concat(P(N(e),"` `"),"`"))}function b(e,t,n){var a=/^(?!\d)[\w$]+\/(?!\d)[\w$]+$/,l=I(D(t,",")),o=a.test(e)?null:{msg:"errName",value:T(e)?null:e};return null===o&&j(n,e)&&(o={msg:"errDups",value:e}),null===o&&0===l.length&&(o={msg:"errAtts",value:null}),{name:e,atts:l,error:o}}var g=wp.i18n.__,h=wp.zukit.utils.simpleMarkdown,f,v=(0,wp.zukit.render.externalDataSettings)("zutranslate",{}),y=v.disabled,k=v.qtxlink,w=g("This plugin only *complements* the functionality of the **qTranslate-XT** plugin.\nThe [qTranslate-XT]($link1) version `3.10 or above` should be installed and activated (now it **was not found** among active plugins).","zu-translate"),_={gutenberg:{label:g("Support WordPress Block Editor","zu-translate"),help:g('Settings and list of supported blocks see below in the "**Block Editor Support**" section.',"zu-translate")},flags:{label:g("Show flags in buttons","zu-translate"),help:g("Display country flag on language switching buttons in admin mode.","zu-translate")},appearance:{label:g("Custom button appearance","zu-translate"),help:g("Change the appearance of the buttons for language switching in admin mode.","zu-translate")},large:{label:g("Large custom button size","zu-translate"),help:g("Enlarge the size of the buttons (*for those who prefer more*).","zu-translate"),depends:"appearance"},list:{label:g('Add "Language Switcher" to post/pages list',"zu-translate"),help:g("Ability to switch language on a list of posts/pages and support for **Quick Edit**.","zu-translate")}},z={ls_frontend:{label:g("Swither on Front-End?","zu-translate"),help:g("???","zu-translate")},ls_menu:{label:g("Swither in Menu?","zu-translate"),help:g("The switcher should be added in menu to be displayed.","zu-translate")},ls_display:{label:g("Display in Menu","zu-translate"),help:g("How the language will be dispayed in menu","zu-translate")}},E={note:g("Only blocks **known to this plugin** will support language switching in the **Block Editor**.\nTo disable the block support - turn off the **checkbox** in front of the block name. You can also add other blocks - for this you need to know the **internal** name of the block (which includes the `namespace`) and the name of the attribute/attributes that contain the **content** of the block (**what requires translation**). You can learn these names by looking at the source code of the plugin/themes where these blocks are defined or by contacting the developer.\n*Unfortunately, a simpler method has not yet been found.*","zu-translate"),blockTitle:g("Supported blocks","zu-translate"),moreTitle:g("Add more blocks","zu-translate"),ignoreCptTitle:g("Ignore Custom Post Types","zu-translate"),toggles:["sync","initial","session","unsaved","nobackups"],sync:{label:g("Synchronize language switching","zu-translate"),help:g("Switching a language in one block will lead to language switching in all editable blocks.","zu-translate")},initial:{label:g("Open language panel","zu-translate"),help:g("Whether or not the language switching panel will start open.","zu-translate")},session:{label:g("Support session language","zu-translate"),help:g("During one session, language switching on different pages will be synchronized.","zu-translate")},unsaved:{label:g("Switch without changes","zu-translate"),help:g("Do not consider language switching as **unsaved** changes for the current edit session.","zu-translate")},nobackups:{label:g('Remove Block Editor "backups"',"zu-translate"),help:g("Removes Wordpress *autosaves* and *backups* notices which could be very annoying.\nYou should understand what you are doing.","zu-translate")},ignore_cpt:{label:g("Custom post types that will be ignored","zu-translate"),input:g("Enter the custom post type","zu-translate"),inputHelp:g("Usually the custom post type is one word, like `product` for **WooCommerce** plugin","zu-translate"),ignoreAll:{label:g("Ignore all custom post types","zu-translate"),help:g("Support for the **Block Editor** will be activated only on built-in types: `post, page`","zu-translate")}},custom:{nameLabel:g("Block name","zu-translate"),nameHelp:g("The block name must contain a **namespace** and a **slash**, for example, `core/quote`","zu-translate"),attsLabel:g("Attribute names","zu-translate"),attsInput:g("Enter the name of the attribute","zu-translate"),attsInputHelp:g("Usually the attribute has the name `content`, but it is not always so (see note above)","zu-translate"),addBlock:g("Add block","zu-translate")},resetAll:g("Reset Block Editor Settings","zu-translate"),errName:g("It does not look like a valid **block name**. Maybe you forgot the `namespace`? ","zu-translate"),errAtts:g("You need to specify at least one **attribute** for translation.","zu-translate"),errDups:g("Duplicates are not allowed. Are you mistaken in the name of the block?","zu-translate")},R={convertLabel:g("Convert Classic Blocks","zu-translate"),convertHelp:g("Convert all **Classic Blocks** to Gutenberg blocks. Regular text will be replaced with `core/paragraph`, headings with `core/heading` and shortcodes with `core/shortcode` blocks.","zu-translate"),convertAction:g("Convert","zu-translate"),convertTitle:g("Select options for conversion","zu-translate"),convertTypeLabel:g("Select a type for conversion","zu-translate"),convertOnlySelected:g("Convert only selected posts","zu-translate"),convertSelect:g("Select the %s for conversion","zu-translate"),splitLabel:g("Split Classic Blocks","zu-translate"),splitHelp:g("All **Classic Blocks** found will be split by languages and the contents of the block for each language will be converted to the `Gutenberg` blocks and will be saved in a separate document.","zu-translate"),splitAction:g("Split","zu-translate"),splitTitle:g("Select options for split","zu-translate"),splitTypeLabel:g("Select a type for split","zu-translate"),splitOnlySelected:g("Split only selected posts","zu-translate"),splitSelect:g("Select the %s for split","zu-translate"),primaryLabel:g("Select a primary language","zu-translate"),primaryHelp:g("The contents of the block for this language will be used as a **basis** for conversion.","zu-translate")},S={list_exclude:{label:g('Custom post types that will be ignored for **"posts/pages"** switcher',"zu-translate"),input:g("Enter the custom post type","zu-translate"),inputHelp:g("Usually the custom post type is one word, like `shop_coupon` for **WooCommerce** plugin","zu-translate"),ignoreAll:{label:g("Ignore all custom post types","zu-translate"),help:g('Support for the **"posts/pages"** switcher will be activated only on built-in types: `post, page`',"zu-translate")}},resetAll:g("Reset Advanced Settings","zu-translate"),resetNotice:g("Advanced settings are reset to defaults","zu-translate")},O,C={options:_,panels:{gutenberg:{value:!0,label:g("Block Editor Support","zu-translate"),depends:"gutenberg"},advanced:{value:!1,label:g("Advanced Settings","zu-translate")}},switcher:z,gutenberg:E,convert:R,advanced:S,inacive:!!y&&h(w,{br:!0,links:k})},A=lodash,T=A.isEmpty,x=A.isString,N=A.castArray,L=A.get,j=A.has,B=A.map,H=A.mapKeys,P=A.join,D=A.split,I=A.compact,M=A.includes,q=A.without,Z=A.pick,W=A.omit,U=A.keys,Y=wp.i18n.__,F=wp.components,G=F.Button,K=F.CheckboxControl,X=F.PanelBody,Q=wp.element,J=Q.useCallback,V=Q.useState,ee=wp.zukit.render.toggleOption,te=wp.zukit.components,ne=te.ZukitPanel,ae=te.AdvTextControl,le=te.ListInputControl,oe=te.ZukitToggle,re=wp.zukit.utils,se=re.simpleMarkdown,ie=re.getExternalData,ce=re.messageWithError,ue=wp.zukit.jq.scrollTop,pe="blockeditor",de=ie("supported",{}),me=function e(o){var r=o.data,s=o.options,i=o.updateOptions,c=o.resetOptions,u=o.ajaxAction,p,d=o.noticeOperations.createNotice,g=L(s,pe,{}),h=g.excluded,f=g.custom,v=g.ignore_cpt,y,k=a(V(""),2),w=k[0],_=k[1],z,E=a(V(""),2),R=E[0],S=E[1],O,C=a(V(de),2),A=C[0],N=C[1],j=J((function(){c(pe,(function(){return u("zutranslate_reset_supported",(function(e){N(e),ue()}))}))}),[c,u]),P=J((function(e){var t=H(e,(function(e,t){return"".concat(pe,".").concat(t)}));i(t)}),[i]),D=J((function(e,t){P(e?{excluded:q(h,t)}:{excluded:[].concat(l(h),[t])})}),[h,P]),I=J((function(){var e=b(w,R,f),a=e.name,l=e.atts,o=e.error;null===o?(P({custom:t(t({},f),{},n({},a,{title:a,atts:l}))}),_(""),S("")):(d({status:"warning",content:ce(r[o.msg],o.value),isDismissible:!0,__unstableHTML:!0}),ue())}),[f,w,R,P,d,r]),Y=W(A,U(f)),F=!T(f);return React.createElement(ne,{id:"gutenberg",options:s,initialOpen:!0},ee(Z(r,r.toggles),g,P),React.createElement("div",{className:"__note"},se(r.note,{br:!0})),React.createElement(X,{className:"__subtitle",title:r.blockTitle,initialOpen:!1},React.createElement("div",{className:"__supported"},B(Y,(function(e,t){var n=e.title,a=e.atts;return React.createElement(K,{key:t,label:n,help:m(a),checked:!M(h,t),onChange:function e(n){return D(n,t)}})})))),F&&React.createElement("div",{className:"__supported"},B(f,(function(e,t){var n=e.title,a=e.atts;return React.createElement(K,{key:t,label:n,help:m(a),checked:!M(h,t),onChange:function e(n){return D(n,t)}})}))),React.createElement(X,{className:"__subtitle",title:r.moreTitle,initialOpen:!1},React.createElement("div",{className:"__custom"},React.createElement(ae,{label:r.custom.nameLabel,help:se(r.custom.nameHelp,{br:!0}),value:w,onChange:_,onKeyEnter:I}),React.createElement(le,{isOpen:!0,isNotEmptyLabel:!0,strict:/^(?!\d)[\w$]+$/,label:r.custom.attsLabel,inputLabel:se(r.custom.attsInput,{br:!0}),inputHelp:se(r.custom.attsInputHelp,{br:!0}),value:R,onChange:S}),React.createElement(G,{isSecondary:!0,className:"__plugin_actions __auto green",label:r.custom.addBlock,icon:"plus-alt",onClick:I},r.custom.addBlock))),React.createElement(X,{className:"__subtitle",title:r.ignoreCptTitle,initialOpen:!1},React.createElement("div",{className:"__cpt"},x(v)&&React.createElement(le,{strict:/^[a-z0-9_-]+$/,label:r.ignore_cpt.label,inputLabel:se(r.ignore_cpt.input,{br:!0}),inputHelp:se(r.ignore_cpt.inputHelp,{br:!0}),value:v,onChange:function e(t){return P({ignore_cpt:t})}}),React.createElement(oe,{label:r.ignore_cpt.ignoreAll.label,help:r.ignore_cpt.ignoreAll.help,checked:!x(v),onChange:function e(){return P({ignore_cpt:!!x(v)||""})}}))),React.createElement("div",{className:"__flex __right"},React.createElement(G,{isSecondary:!0,className:"__plugin_actions __auto magenta",label:r.resetAll,icon:"image-rotate",onClick:j},r.resetAll)))},be,ge=lodash.isString,he=wp.components.Button,fe=wp.element.useCallback,ve=wp.zukit.components,ye=ve.ZukitPanel,ke=ve.ListInputControl,we=ve.ZukitToggle,_e=wp.zukit.utils.simpleMarkdown,ze=wp.zukit.jq.scrollTop,Ee=function e(t){var n=t.data,a=t.options,l=t.updateOptions,o=t.resetOptions,r,s=t.noticeOperations.createNotice,i=a.list_exclude,c=fe((function(){o(["list_exclude"],(function(){s({status:"info",content:n.resetNotice,isDismissible:!0,__unstableHTML:!0}),ze()}))}),[o,s,n.resetNotice]);return React.createElement(ye,{id:"advanced",options:a,initialOpen:!0},React.createElement("div",{className:"__advanced"},ge(i)&&React.createElement(ke,{strict:/^[a-z0-9_-]+$/,label:_e(n.list_exclude.label,{br:!0}),inputLabel:_e(n.list_exclude.input,{br:!0}),inputHelp:_e(n.list_exclude.inputHelp,{br:!0}),value:i,onChange:function e(t){return l({list_exclude:t})}}),React.createElement(we,{label:n.list_exclude.ignoreAll.label,help:n.list_exclude.ignoreAll.help,checked:!ge(i),onChange:function e(){return l({list_exclude:!!ge(i)||""})}})),React.createElement("div",{className:"__flex __right"},React.createElement(he,{isSecondary:!0,className:"__plugin_actions __auto magenta",label:n.resetAll,icon:"image-rotate",onClick:c},n.resetAll)))},Re=lodash,Se=Re.isEmpty,Oe=Re.map,Ce=Re.get,Ae=Re.reject,Te=Re.find,xe=Re.pick,Ne=Re.includes,Le=Re.reduce,je=wp.i18n,Be=je.__,He=je.sprintf,Pe=wp.components,De=Pe.Popover,Ie=Pe.Button,Me=Pe.SelectControl,$e=wp.blockEditor.BlockIcon,qe=wp.element,Ze=qe.useState,We=qe.useRef,Ue=qe.useCallback,Ye=wp.data.useSelect,Fe=wp.zukit.icons.close,Ge=wp.zukit.utils,Ke=Ge.getExternalData,Xe=Ge.simpleMarkdown,Qe=Ge.unescapeHtml,Je=wp.zukit.components,Ve=Je.ZukitSidebar,et=Je.ZukitToggle,tt="zutranslate_convert",nt="superhero",at="star-half",lt=["attachment","wp_block","nav_menu_item","wp_template","wp_template_part","wp_navigation"],ot=[{value:0,label:"Loading..."}],rt=Le(Ke("qtxlangs",{}),(function(e,t){return e.push({value:t.code,label:t.name,active:t.active}),e}),[]),st=function e(t){var n,l,o=t.data,r=t.ajaxAction,s,i=a(Ze(!1),2),c=i[0],u=i[1],p,d=a(Ze("convert"),2),m=d[0],b=d[1],g="convert"===m,h=We({types:null,posts:null}),f,v=a(Ze(0),2),y=v[0],k=v[1],w,_=a(Ze(""),2),z=_[0],E=_[1],R,S=a(Ze(!1),2),O=S[0],C=S[1],A,T=a(Ze(0),2),x=T[0],N=T[1],L,j=a(Ze(null===(n=Te(rt,["active",!0]))||void 0===n?void 0:n.value),2),B=j[0],H=j[1],P=We(null),D=We(null),I=Ye((function(e){if(null===(null==h?void 0:h.current.types)){var t=e("core").getPostTypes();if(!Se(t)){var n=Ae(Oe(t,(function(e){return xe(e,["name","slug","labels"])})),(function(e){return Ne(lt,e.slug)}));h.current.types=Le(n,(function(e,t){return e.push({value:t.slug,label:t.labels.singular_name}),e}),[{value:0,label:"Select type"}])}}return null!=h&&h.current.types?h.current.types:ot})),M=g?o.convertSelect:o.splitSelect,q=Ue((function(e){var t,n=null===(t=Te(I,{value:e}))||void 0===t?void 0:t.label.toLowerCase();k(e),E([He(M,n),He(Be("Select %s","zu-translate"),n)]),h.current.posts=null}),[M,I]),Z=Ye((function(e){var t=e("core"),n=t.getEntityRecords,a=t.hasFinishedResolution,l=["postType",y];if(y&&O&&null===(null==h?void 0:h.current.posts)){var o=n.apply(void 0,l);Se(o)||(h.current.posts=Le(o,(function(e,t){return e.push({value:t.id,label:Qe(t.title.rendered)}),e}),[{value:0,label:z[1]}]))}return{postOptions:null==h?void 0:h.current.posts,hasResolved:y&&O&&a("getEntityRecords",l)}}),[y,O,z]),W=Z.postOptions,U=Z.hasResolved,Y=Ue((function(e){u(!c),b(e)}),[c]),F=Ue((function(){u(!1)}),[]),G=Ue((function(){u(!1),r({action:"zutranslate_".concat(m,"_classic"),value:{id:O?x:0,postType:y,primaryLang:B}})}),[m,x,y,B,O,r]),K=O?0===x:0===y,X=null===(l=Ce(g?P:D,"current"))||void 0===l?void 0:l.getBoundingClientRect();return React.createElement(Ve.MoreActions,null,React.createElement(Ve.ActionButton,{color:"magenta",icon:nt,onClick:function e(){return Y("convert")},label:o.convertLabel,help:o.convertHelp,ref:P}),React.createElement(Ve.ActionButton,{color:"blue",icon:at,onClick:function e(){return Y("split")},label:o.splitLabel,help:o.splitHelp,ref:D}),c&&React.createElement(De,{position:"middle left",noArrow:!1,onClose:F,anchorRect:X,focusOnMount:!1},React.createElement("div",{className:tt},React.createElement("div",{className:"__title"},React.createElement($e,{icon:g?nt:at}),React.createElement("span",null,g?o.convertTitle:o.splitTitle),React.createElement(Ie,{className:"__close",icon:Fe,onClick:F})),React.createElement("div",{className:"__body"},React.createElement(Me,{label:g?o.convertTypeLabel:o.splitTypeLabel,value:y,onChange:q,options:I}),!!y&&React.createElement(et,{label:g?o.convertOnlySelected:o.splitOnlySelected,checked:O,onChange:function e(){return C(!O)}}),O&&React.createElement(Me,{label:z[0],value:x,onChange:N,options:U?W:ot}),g&&React.createElement(Me,{className:"__lang",label:o.primaryLabel,help:Xe(o.primaryHelp),value:B,onChange:H,options:rt}),React.createElement("div",{className:"__submit"},React.createElement(Ie,{isPrimary:!0,disabled:K,icon:"editor-table",onClick:G},g?o.convertAction:o.splitAction))))))},it=wp.zukit.render,ct=it.renderPage,ut=it.toggleOption,pt=wp.zukit.components.ZukitPanel,dt=C.options,mt=C.gutenberg,bt=C.advanced,gt=C.inacive,ht=C.convert,ft=function e(t){var n=t.title,a=t.options,l=t.updateOptions,o=t.resetOptions,r=t.ajaxAction,s=t.noticeOperations;return gt?React.createElement("div",{className:"__note"},gt):React.createElement(React.Fragment,null,React.createElement(pt,{title:n},ut(dt,a,l)),React.createElement(me,{data:mt,options:a,updateOptions:l,resetOptions:o,noticeOperations:s,ajaxAction:r}),React.createElement(Ee,{data:bt,options:a,updateOptions:l,resetOptions:o,noticeOperations:s}),React.createElement(st,{data:ht,ajaxAction:r}))};ct("zutranslate",{edit:ft,panels:C.panels})}();