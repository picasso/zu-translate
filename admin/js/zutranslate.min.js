!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function t(t){for(var a=1;a<arguments.length;a++){var l=null!=arguments[a]?arguments[a]:{};a%2?e(Object(l),!0).forEach((function(e){n(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return r(e)||i(e,t)||c(e,t)||d()}function l(e){return o(e)||s(e)||c(e)||p()}function o(e){if(Array.isArray(e))return u(e)}function r(e){if(Array.isArray(e))return e}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a=[],l=!0,o=!1,r,s;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){o=!0,s=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw s}}return a}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){var t=U("Content attributes:","zu-translate");return re("".concat(t,"`").concat(P(L(e),"` `"),"`"))}function m(e,t,n){var a=/^(?!\d)[\w$]+\/(?!\d)[\w$]+$/,l=D(H(t,",")),o=a.test(e)?null:{msg:"errName",value:A(e)?null:e};return null===o&&B(n,e)&&(o={msg:"errDups",value:e}),null===o&&0===l.length&&(o={msg:"errAtts",value:null}),{name:e,atts:l,error:o}}var g=wp.i18n.__,h=wp.zukit.utils.simpleMarkdown,f,v=(0,wp.zukit.render.externalDataSettings)("zutranslate",{}),y=v.disabled,w=v.qtxlink,k=g("This plugin only *complements* the functionality of the **qTranslate-XT** plugin.\nThe [qTranslate-XT]($link1) version `3.10 or above` should be installed and activated (now it **was not found** among active plugins).","zu-translate"),z={gutenberg:{label:g("Support WordPress Block Editor","zu-translate"),help:g('Settings and list of supported blocks see below in the "**Block Editor Support**" section.',"zu-translate")},flags:{label:g("Show flags in buttons","zu-translate"),help:g("Display country flag on language switching buttons in admin mode.","zu-translate")},appearance:{label:g("Custom button appearance","zu-translate"),help:g("Change the appearance of the buttons for language switching in admin mode.","zu-translate")},large:{label:g("Large custom button size","zu-translate"),help:g("Enlarge the size of the buttons (*for those who prefer more*).","zu-translate"),depends:"appearance"},list:{label:g('Add "Language Switcher" to post/pages list',"zu-translate"),help:g("Ability to switch language on a list of posts/pages and support for **Quick Edit**.","zu-translate")}},_={ls_frontend:{label:g("Swither on Front-End?","zu-translate"),help:g("???","zu-translate")},ls_menu:{label:g("Swither in Menu?","zu-translate"),help:g("The switcher should be added in menu to be displayed.","zu-translate")},ls_display:{label:g("Display in Menu","zu-translate"),help:g("How the language will be dispayed in menu","zu-translate")}},E={note:g("Only blocks **known to this plugin** will support language switching in the **Block Editor**.\nTo disable the block support - turn off the **checkbox** in front of the block name. You can also add other blocks - for this you need to know the **internal** name of the block (which includes the `namespace`) and the name of the attribute/attributes that contain the **content** of the block (**what requires translation**). You can learn these names by looking at the source code of the plugin/themes where these blocks are defined or by contacting the developer.\n*Unfortunately, a simpler method has not yet been found.*","zu-translate"),blockTitle:g("Supported blocks","zu-translate"),moreTitle:g("Add more blocks","zu-translate"),ignoreCptTitle:g("Ignore Custom Post Types","zu-translate"),toggles:["sync","initial","session","unsaved","nobackups"],sync:{label:g("Synchronize language switching","zu-translate"),help:g("Switching a language in one block will lead to language switching in all editable blocks.","zu-translate")},initial:{label:g("Open language panel","zu-translate"),help:g("Whether or not the language switching panel will start open.","zu-translate")},session:{label:g("Support session language","zu-translate"),help:g("During one session, language switching on different pages will be synchronized.","zu-translate")},unsaved:{label:g("Switch without changes","zu-translate"),help:g("Do not consider language switching as **unsaved** changes for the current edit session.","zu-translate")},nobackups:{label:g('Remove Block Editor "backups"',"zu-translate"),help:g("Removes Wordpress *autosaves* and *backups* notices which could be very annoying.\nYou should understand what you are doing.","zu-translate")},ignore_cpt:{label:g("Custom post types that will be ignored","zu-translate"),input:g("Enter the custom post type","zu-translate"),inputHelp:g("Usually the custom post type is one word, like `product` for **WooCommerce** plugin","zu-translate"),ignoreAll:{label:g("Ignore all custom post types","zu-translate"),help:g("Support for the **Block Editor** will be activated only on built-in types - `post` and `page`.","zu-translate")}},custom:{nameLabel:g("Block name","zu-translate"),nameHelp:g("The block name must contain a **namespace** and a **slash**, for example, `core/quote`","zu-translate"),attsLabel:g("Attribute names","zu-translate"),attsInput:g("Enter the name of the attribute","zu-translate"),attsInputHelp:g("Usually the attribute has the name `content`, but it is not always so (see note above)","zu-translate"),addBlock:g("Add block","zu-translate")},resetAll:g("Reset Block Editor Settings","zu-translate"),errName:g("It does not look like a valid **block name**. Maybe you forgot the `namespace`? ","zu-translate"),errAtts:g("You need to specify at least one **attribute** for translation.","zu-translate"),errDups:g("Duplicates are not allowed. Are you mistaken in the name of the block?","zu-translate")},S={convertLabel:g("Convert Classic Blocks","zu-translate"),convertHelp:g("Convert all **Classic Blocks** to Gutenberg blocks. Regular text will be replaced with `core/paragraph`, headings with `core/heading` and shortcodes with `core/shortcode` blocks.","zu-translate"),convertAction:g("Convert","zu-translate"),convertTitle:g("Select options for conversion","zu-translate"),convertTypeLabel:g("Select a type for conversion","zu-translate"),convertOnlySelected:g("Convert only selected posts","zu-translate"),convertSelect:g("Select the %s for conversion","zu-translate"),splitLabel:g("Split Classic Blocks","zu-translate"),splitHelp:g("All **Classic Blocks** found will be split by languages and the contents of the block for each language will be converted to the `Gutenberg` blocks and will be saved in a separate document.","zu-translate"),splitAction:g("Split","zu-translate"),splitTitle:g("Select options for split","zu-translate"),splitTypeLabel:g("Select a type for split","zu-translate"),splitOnlySelected:g("Split only selected posts","zu-translate"),splitSelect:g("Select the %s for split","zu-translate"),primaryLabel:g("Select a primary language","zu-translate"),primaryHelp:g("The contents of the block for this language will be used as a **basis** for conversion.","zu-translate")},R,O={options:z,panels:{gutenberg:{value:!0,label:g("Block Editor Support","zu-translate"),depends:"gutenberg"},switcher:{value:!1,label:g("Language Switcher","zu-translate")}},switcher:_,gutenberg:E,convert:S,inacive:!!y&&h(k,{br:!0,links:w})},C=lodash,A=C.isEmpty,T=C.isString,L=C.castArray,j=C.get,B=C.has,N=C.map,x=C.mapKeys,P=C.join,H=C.split,D=C.compact,I=C.includes,M=C.without,q=C.pick,W=C.omit,Z=C.keys,U=wp.i18n.__,Y=wp.components,F=Y.Button,G=Y.CheckboxControl,K=Y.PanelBody,X=wp.element,Q=X.useCallback,J=X.useState,V=wp.zukit.render.toggleOption,ee=wp.zukit.components,te=ee.ZukitPanel,ne=ee.AdvTextControl,ae=ee.ListInputControl,le=ee.ZukitToggle,oe=wp.zukit.utils,re=oe.simpleMarkdown,se=oe.getExternalData,ie=oe.messageWithError,ce=wp.zukit.jq.scrollTop,ue="blockeditor",pe=se("supported",{}),de=function e(o){var r=o.data,s=o.options,i=o.updateOptions,c=o.resetOptions,u=o.ajaxAction,p,d=o.noticeOperations.createNotice,g=j(s,ue,{}),h=g.excluded,f=g.custom,v=g.ignore_cpt,y,w=a(J(""),2),k=w[0],z=w[1],_,E=a(J(""),2),S=E[0],R=E[1],O,C=a(J(pe),2),L=C[0],B=C[1],P=Q((function(){c(ue,(function(){return u("zutranslate_reset_supported",(function(e){B(e),ce()}))}))}),[c,u]),H=Q((function(e){var t=x(e,(function(e,t){return"".concat(ue,".").concat(t)}));i(t)}),[i]),D=Q((function(e,t){H(e?{excluded:M(h,t)}:{excluded:[].concat(l(h),[t])})}),[h,H]),U=Q((function(){var e=m(k,S,f),a=e.name,l=e.atts,o=e.error;null===o?(H({custom:t(t({},f),{},n({},a,{title:a,atts:l}))}),z(""),R("")):(d({status:"warning",content:ie(r[o.msg],o.value),isDismissible:!0,__unstableHTML:!0}),ce())}),[f,k,S,H,d,r]),Y=W(L,Z(f)),X=!A(f);return React.createElement(te,{id:"gutenberg",options:s,initialOpen:!0},V(q(r,r.toggles),g,H),React.createElement("div",{className:"__note"},re(r.note,{br:!0})),React.createElement(K,{className:"__subtitle",title:r.blockTitle,initialOpen:!1},React.createElement("div",{className:"__supported"},N(Y,(function(e,t){var n=e.title,a=e.atts;return React.createElement(G,{key:t,label:n,help:b(a),checked:!I(h,t),onChange:function e(n){return D(n,t)}})})))),X&&React.createElement("div",{className:"__supported"},N(f,(function(e,t){var n=e.title,a=e.atts;return React.createElement(G,{key:t,label:n,help:b(a),checked:!I(h,t),onChange:function e(n){return D(n,t)}})}))),React.createElement(K,{className:"__subtitle",title:r.moreTitle,initialOpen:!1},React.createElement("div",{className:"__custom"},React.createElement(ne,{label:r.custom.nameLabel,help:re(r.custom.nameHelp,{br:!0}),value:k,onChange:z,onKeyEnter:U}),React.createElement(ae,{isOpen:!0,isNotEmptyLabel:!0,strict:/^(?!\d)[\w$]+$/,label:r.custom.attsLabel,inputLabel:re(r.custom.attsInput,{br:!0}),inputHelp:re(r.custom.attsInputHelp,{br:!0}),value:S,onChange:R}),React.createElement(F,{isSecondary:!0,className:"__plugin_actions __auto green",label:r.custom.addBlock,icon:"plus-alt",onClick:U},r.custom.addBlock))),React.createElement(K,{className:"__subtitle",title:r.ignoreCptTitle,initialOpen:!1},React.createElement("div",{className:"__cpt"},T(v)&&React.createElement(ae,{strict:/^[a-z0-9_-]+$/,label:r.ignore_cpt.label,inputLabel:re(r.ignore_cpt.input,{br:!0}),inputHelp:re(r.ignore_cpt.inputHelp,{br:!0}),value:v,onChange:function e(t){return H({ignore_cpt:t})}}),React.createElement(le,{label:r.ignore_cpt.ignoreAll.label,help:r.ignore_cpt.ignoreAll.help,checked:!T(v),onChange:function e(){return H({ignore_cpt:!!T(v)||""})}}))),React.createElement("div",{className:"__flex __right"},React.createElement(F,{isSecondary:!0,className:"__plugin_actions __auto magenta",label:r.resetAll,icon:"image-rotate",onClick:P},r.resetAll)))},be=lodash,me=be.isEmpty,ge=be.map,he=be.get,fe=be.reject,ve=be.find,ye=be.pick,we=be.includes,ke=be.reduce,ze=wp.i18n,_e=ze.__,Ee=ze.sprintf,Se=wp.components,Re=Se.Popover,Oe=Se.Button,Ce=Se.SelectControl,Ae=wp.blockEditor.BlockIcon,Te=wp.element,Le=Te.useState,je=Te.useRef,Be=Te.useCallback,Ne=wp.data.useSelect,xe=wp.zukit.icons.close,Pe=wp.zukit.utils,He=Pe.getExternalData,De=Pe.simpleMarkdown,Ie=Pe.unescapeHtml,Me=wp.zukit.components,$e=Me.ZukitSidebar,qe=Me.ZukitToggle,We="zutranslate_convert",Ze="superhero",Ue="star-half",Ye=["attachment","wp_block","nav_menu_item","wp_template","wp_template_part","wp_navigation"],Fe=[{value:0,label:"Loading..."}],Ge=ke(He("qtxlangs",{}),(function(e,t){return e.push({value:t.code,label:t.name,active:t.active}),e}),[]),Ke=function e(t){var n,l,o=t.data,r=t.ajaxAction,s,i=a(Le(!1),2),c=i[0],u=i[1],p,d=a(Le("convert"),2),b=d[0],m=d[1],g="convert"===b,h=je({types:null,posts:null}),f,v=a(Le(0),2),y=v[0],w=v[1],k,z=a(Le(""),2),_=z[0],E=z[1],S,R=a(Le(!1),2),O=R[0],C=R[1],A,T=a(Le(0),2),L=T[0],j=T[1],B,N=a(Le(null===(n=ve(Ge,["active",!0]))||void 0===n?void 0:n.value),2),x=N[0],P=N[1],H=je(null),D=je(null),I=Ne((function(e){if(null===(null==h?void 0:h.current.types)){var t=e("core").getPostTypes();if(!me(t)){var n=fe(ge(t,(function(e){return ye(e,["name","slug","labels"])})),(function(e){return we(Ye,e.slug)}));h.current.types=ke(n,(function(e,t){return e.push({value:t.slug,label:t.labels.singular_name}),e}),[{value:0,label:"Select type"}])}}return null!=h&&h.current.types?h.current.types:Fe})),M=g?o.convertSelect:o.splitSelect,q=Be((function(e){var t,n=null===(t=ve(I,{value:e}))||void 0===t?void 0:t.label.toLowerCase();w(e),E([Ee(M,n),Ee(_e("Select %s","zu-translate"),n)]),h.current.posts=null}),[M,I]),W=Ne((function(e){var t=e("core"),n=t.getEntityRecords,a=t.hasFinishedResolution,l=["postType",y];if(y&&O&&null===(null==h?void 0:h.current.posts)){var o=n.apply(void 0,l);me(o)||(h.current.posts=ke(o,(function(e,t){return e.push({value:t.id,label:Ie(t.title.rendered)}),e}),[{value:0,label:_[1]}]))}return{postOptions:null==h?void 0:h.current.posts,hasResolved:y&&O&&a("getEntityRecords",l)}}),[y,O,_]),Z=W.postOptions,U=W.hasResolved,Y=Be((function(e){u(!c),m(e)}),[c]),F=Be((function(){u(!1)}),[]),G=Be((function(){u(!1),r({action:"zutranslate_".concat(b,"_classic"),value:{id:O?L:0,postType:y,primaryLang:x}})}),[b,L,y,x,O,r]),K=O?0===L:0===y,X=null===(l=he(g?H:D,"current"))||void 0===l?void 0:l.getBoundingClientRect();return React.createElement($e.MoreActions,null,React.createElement($e.ActionButton,{color:"magenta",icon:Ze,onClick:function e(){return Y("convert")},label:o.convertLabel,help:o.convertHelp,ref:H}),React.createElement($e.ActionButton,{color:"blue",icon:Ue,onClick:function e(){return Y("split")},label:o.splitLabel,help:o.splitHelp,ref:D}),c&&React.createElement(Re,{position:"middle left",noArrow:!1,onClose:F,anchorRect:X,focusOnMount:!1},React.createElement("div",{className:We},React.createElement("div",{className:"__title"},React.createElement(Ae,{icon:g?Ze:Ue}),React.createElement("span",null,g?o.convertTitle:o.splitTitle),React.createElement(Oe,{className:"__close",icon:xe,onClick:F})),React.createElement("div",{className:"__body"},React.createElement(Ce,{label:g?o.convertTypeLabel:o.splitTypeLabel,value:y,onChange:q,options:I}),!!y&&React.createElement(qe,{label:g?o.convertOnlySelected:o.splitOnlySelected,checked:O,onChange:function e(){return C(!O)}}),O&&React.createElement(Ce,{label:_[0],value:L,onChange:j,options:U?Z:Fe}),g&&React.createElement(Ce,{className:"__lang",label:o.primaryLabel,help:De(o.primaryHelp),value:x,onChange:P,options:Ge}),React.createElement("div",{className:"__submit"},React.createElement(Oe,{isPrimary:!0,disabled:K,icon:"editor-table",onClick:G},g?o.convertAction:o.splitAction))))))},Xe=wp.zukit.render,Qe=Xe.renderPage,Je=Xe.toggleOption,Ve=wp.zukit.components.ZukitPanel,et=O.options,tt=O.gutenberg,nt=O.inacive,at=O.convert,lt=function e(t){var n=t.title,a=t.options,l=t.updateOptions,o=t.resetOptions,r=t.ajaxAction,s=t.noticeOperations;return nt?React.createElement("div",{className:"__note"},nt):React.createElement(React.Fragment,null,React.createElement(Ve,{title:n},Je(et,a,l)),React.createElement(de,{data:tt,options:a,updateOptions:l,resetOptions:o,noticeOperations:s,ajaxAction:r}),React.createElement(Ke,{data:at,ajaxAction:r}))};Qe("zutranslate",{edit:lt,panels:O.panels})}();